{"is_source_file": true, "format": "JavaScript", "description": "A service class for user management including registration, authentication, profile updates, verification, and credit handling within a Node.js backend application.", "external_files": ["../config/database", "../config/config"], "external_methods": ["query", "transaction"], "published": ["UserService"], "classes": [{"name": "UserService", "description": "A class encapsulating user-related operations such as registration, authentication, profile management, and credit transactions."}], "methods": [{"name": "createUser(userData)", "description": "Creates a new user account with hashed password, checks for duplicates, and logs activity.", "scope": "UserService", "scopeKind": "class"}, {"name": "authenticateUser(email, password)", "description": "Authenticates a user by verifying email and password, updating last login.", "scope": "UserService", "scopeKind": "class"}, {"name": "getUserProfile(userId)", "description": "Retrieves a user's profile data by their ID.", "scope": "UserService", "scopeKind": "class"}, {"name": "updateUserProfile(userId, updateData)", "description": "Updates allowed profile fields for a user.", "scope": "UserService", "scopeKind": "class"}, {"name": "verifyNorwegianId(userId, norwegianId)", "description": "Simulates Norwegian ID verification and logs activity.", "scope": "UserService", "scopeKind": "class"}, {"name": "verifyDriverLicense(userId, licenseNumber, expiryDate)", "description": "Simulates driver license verification and logs activity.", "scope": "UserService", "scopeKind": "class"}, {"name": "addUserCredit(userId, amount, transactionType = 'purchase', description)", "description": "Adds credit to a user's account and logs the transaction.", "scope": "UserService", "scopeKind": "class"}, {"name": "deductUserCredit(userId, amount, transactionType = 'payment', description)", "description": "Deducts credit from a user's account with balance check and logs the transaction.", "scope": "UserService", "scopeKind": "class"}, {"name": "getUserCreditHistory(userId, limit = 20, offset = 0)", "description": "Retrieves a user's credit transaction history.", "scope": "UserService", "scopeKind": "class"}, {"name": "searchUsers(searchParams)", "description": "Admin function to search users based on various parameters.", "scope": "UserService", "scopeKind": "class"}], "calls": ["bcrypt.hash", "client.query", "client.query", "query", "query", "client.query", "query", "client.query", "client.query", "client.query", "client.query", "client.query", "client.query", "client.query"], "search-terms": ["UserService", "createUser", "authenticateUser", "getUserProfile", "updateUserProfile", "verifyNorwegianId", "verifyDriverLicense", "addUserCredit", "deductUserCredit", "getUserCreditHistory", "searchUsers"], "state": 2, "file_id": 19, "knowledge_revision": 39, "git_revision": "", "ctags": [{"_type": "tag", "name": "UserService", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^class UserService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "addUserCredit", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async addUserCredit(userId, amount, transactionType = 'purchase', description) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, amount, transactionType = 'purchase', description)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "authenticateUser", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async authenticateUser(email, password) {$/", "language": "JavaScript", "kind": "method", "signature": "(email, password)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "bcrypt", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^const bcrypt = require('bcryptjs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^const config = require('..\\/config\\/config');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createUser", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async createUser(userData) {$/", "language": "JavaScript", "kind": "method", "signature": "(userData)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "deductUserCredit", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async deductUserCredit(userId, amount, transactionType = 'payment', description) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, amount, transactionType = 'payment', description)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^module.exports = new UserService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "getUserCreditHistory", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async getUserCreditHistory(userId, limit = 20, offset = 0) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, limit = 20, offset = 0)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "getUserProfile", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async getUserProfile(userId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "searchUsers", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async searchUsers(searchParams) {$/", "language": "JavaScript", "kind": "method", "signature": "(searchParams)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "updateUserProfile", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async updateUserProfile(userId, updateData) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, updateData)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "verifyDriverLicense", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async verifyDriverLicense(userId, licenseNumber, expiryDate) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, licenseNumber, expiryDate)", "scope": "UserService", "scopeKind": "class"}, {"_type": "tag", "name": "verifyNorwegianId", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89331/blablabil_backend/src/services/userService.js", "pattern": "/^  async verifyNorwegianId(userId, norwegianId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, norwegianId)", "scope": "UserService", "scopeKind": "class"}], "hash": "c664686c0c070df05d4f605d67d532cf", "format-version": 4, "code-base-name": "blablabil_backend", "filename": "blablabil_backend/src/services/userService.js", "fields": [{"name": "module.exports = new UserService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"39": ""}]}